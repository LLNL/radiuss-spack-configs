packages::
  all:
    require: target=zen3
    compiler: [gcc, cce, clang, rocmcc]
    providers:
      blas: [netlib-lapack]
      lapack: [netlib-lapack]
      mpi: [cray-mpich]
  cmake:
    version: [3.24.2, 3.23.1, 3.22.4, 3.21.1, 3.19.2, 3.14.5]
    buildable: false
    externals:
    - spec: cmake@3.14.5
      prefix: /usr/tce/packages/cmake/cmake-3.14.5
    - spec: cmake@3.19.2
      prefix: /usr/tce/packages/cmake/cmake-3.19.2
    - spec: cmake@3.21.1
      prefix: /usr/tce/packages/cmake/cmake-3.21.1
    - spec: cmake@3.22.4
      prefix: /usr/tce/packages/cmake/cmake-3.22.4
    - spec: cmake@3.23.1
      prefix: /usr/tce/packages/cmake/cmake-3.23.1
    - spec: cmake@3.24.2
      prefix: /usr/tce/packages/cmake/cmake-3.24.2
  cuda:
    version: [11.4.120]
    buildable: false
    externals:
    - spec: cuda@11.4.120
      prefix: /opt/toss/cudatoolkit/11.4/
  hip:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: hip@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3/hip
    - spec: hip@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0/hip
    - spec: hip@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3/hip
    - spec: hip@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1/hip
    - spec: hip@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1/hip
    - spec: hip@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1/hip
    - spec: hip@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: hip@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: hip@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  hipsparse:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: hipsparse@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: hipsparse@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: hipsparse@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: hipsparse@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: hipsparse@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: hipsparse@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: hipsparse@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: hipsparse@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: hipsparse@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  llvm-amdgpu:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: llvm-amdgpu@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3/llvm
    - spec: llvm-amdgpu@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0/llvm
    - spec: llvm-amdgpu@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3/llvm
    - spec: llvm-amdgpu@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1/llvm
    - spec: llvm-amdgpu@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1/llvm
    - spec: llvm-amdgpu@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1/llvm
    - spec: llvm-amdgpu@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2/llvm
    - spec: llvm-amdgpu@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4/llvm
    - spec: llvm-amdgpu@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0/llvm
  hsa-rocr-dev:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: hsa-rocr-dev@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: hsa-rocr-dev@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: hsa-rocr-dev@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: hsa-rocr-dev@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: hsa-rocr-dev@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: hsa-rocr-dev@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: hsa-rocr-dev@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: hsa-rocr-dev@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: hsa-rocr-dev@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  rocminfo:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: rocminfo@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: rocminfo@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: rocminfo@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: rocminfo@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: rocminfo@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: rocminfo@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: rocminfo@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: rocminfo@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: rocminfo@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  rocm-device-libs:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: rocm-device-libs@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: rocm-device-libs@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: rocm-device-libs@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: rocm-device-libs@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: rocm-device-libs@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: rocm-device-libs@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: rocm-device-libs@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: rocm-device-libs@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: rocm-device-libs@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  rocprim:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: rocprim@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: rocprim@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: rocprim@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: rocprim@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: rocprim@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: rocprim@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: rocprim@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: rocprim@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: rocprim@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  rocthrust:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: rocthrust@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: rocthrust@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: rocthrust@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: rocthrust@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: rocthrust@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: rocthrust@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: rocthrust@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: rocthrust@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: rocthrust@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  rocsparse:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: rocsparse@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: rocsparse@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: rocsparse@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: rocsparse@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: rocsparse@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: rocsparse@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: rocsparse@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: rocsparse@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: rocsparse@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  rocrand:
    version: [5.2.3, 5.3.0, 5.4.3, 5.5.1, 5.6.1, 5.7.1, 6.1.2, 6.2.4, 6.3.0]
    buildable: false
    externals:
    - spec: rocrand@5.2.3%rocmcc@5.2.3
      prefix: /opt/rocm-5.2.3
    - spec: rocrand@5.3.0%rocmcc@5.3.0
      prefix: /opt/rocm-5.3.0
    - spec: rocrand@5.4.3%rocmcc@5.4.3
      prefix: /opt/rocm-5.4.3
    - spec: rocrand@5.5.1%rocmcc@5.5.1
      prefix: /opt/rocm-5.5.1
    - spec: rocrand@5.6.1%rocmcc@5.6.1
      prefix: /opt/rocm-5.6.1
    - spec: rocrand@5.7.1%rocmcc@5.7.1
      prefix: /opt/rocm-5.7.1
    - spec: rocrand@6.1.2%rocmcc@6.1.2
      prefix: /opt/rocm-6.1.2
    - spec: rocrand@6.2.4%rocmcc@6.2.4
      prefix: /opt/rocm-6.2.4
    - spec: rocrand@6.3.0%rocmcc@6.3.0
      prefix: /opt/rocm-6.3.0
  cray-mpich:
    buildable: false
    externals:
    - spec: cray-mpich@8.1.28%cce@15.0.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.28-cce-15.0.1-magic
    - spec: cray-mpich@8.1.28%cce@16.0.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.28-cce-16.0.1-magic
    - spec: cray-mpich@8.1.31%cce@17.0.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.31-cce-17.0.1-magic
    - spec: cray-mpich@8.1.31%cce@18.0.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.31-cce-18.0.1-magic
    - spec: cray-mpich@8.1.28%gcc@12.1.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.28-gcc-12.1.1-magic
    - spec: cray-mpich@8.1.28%rocmcc@5.5.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.28-rocmcc-5.5.1-magic
    - spec: cray-mpich@8.1.28%rocmcc@5.6.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.28-rocmcc-5.6.1-magic
    - spec: cray-mpich@8.1.28%rocmcc@5.7.1
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.28-rocmcc-5.7.1-magic
    - spec: cray-mpich@8.1.31%rocmcc@6.1.2
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.31-rocmcc-6.1.2-magic
    - spec: cray-mpich@8.1.31%rocmcc@6.2.4
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.31-rocmcc-6.2.4-magic
    - spec: cray-mpich@8.1.31%rocmcc@6.3.0
      prefix: /usr/tce/packages/cray-mpich/cray-mpich-8.1.31-rocmcc-6.3.0-magic


  # blas is a bit more complicated because its a virtual package so fake it with
  # the following per spack docs
  netlib-lapack:
    buildable: false
    externals:
    - spec: netlib-lapack@3.8.0
      prefix: /usr

  # System level packages to not build
  autoconf:
    buildable: false
    externals:
    - spec: autoconf@2.69
      prefix: /usr
  automake:
    buildable: false
    externals:
    - spec: automake@1.16.1
      prefix: /usr
  binutils:
    buildable: false
    externals:
    - spec: binutils@2.40
      prefix: /usr
  bzip2:
    buildable: false
    externals:
    - spec: bzip2@1.0.6
      prefix: /usr
  curl:
    buildable: false
    externals:
    - spec: curl@7.61.1
      prefix: /usr
  diffutils:
    buildable: false
    externals:
    - spec: diffutils@3.6
      prefix: /usr
  elfutils:
    buildable: false
    externals:
    - spec: elfutils@0.190
      prefix: /usr
  findutils:
    buildable: false
    externals:
    - spec: findutils@4.6.0
      prefix: /usr
  gettext:
    buildable: false
    externals:
    - spec: gettext@0.19.8.1
      prefix: /usr
  ghostscript:
    buildable: false
    externals:
    - spec: ghostscript@9.27
      prefix: /usr
  gmake:
    buildable: false
    externals:
    - spec: gmake@4.2.1
      prefix: /usr
  groff:
    buildable: false
    externals:
    - spec: groff@1.22.3
      prefix: /usr
  graphviz:
    buildable: false
    externals:
    - spec: graphviz@2.40.1
      prefix: /usr
  libepoxy:
    buildable: false
    externals:
    - spec: libepoxy@1.5.2
      prefix: /usr
  libtool:
    buildable: false
    externals:
    - spec: libtool@2.4.6
      prefix: /usr
  libunwind:
    buildable: false
    externals:
    - spec: libunwind@8.0.1
      prefix: /usr
  libx11:
    buildable: false
    externals:
    - spec: libx11@1.20.4
      prefix: /usr
  lua:
    buildable: false
    externals:
    - spec: lua@5.3.4
      prefix: /usr
  m4:
    buildable: false
    externals:
    - spec: m4@1.4.18
      prefix: /usr
  papi:
    buildable: false
    version: [7.1.0.2]
    externals:
    - spec: papi@7.1.0.2
      prefix: /opt/cray/pe/papi/7.1.0.2
  perl:
    buildable: false
    externals:
    - spec: perl@5.26.3
      prefix: /usr
  pkg-config:
    buildable: false
    externals:
    - spec: pkg-config@1.4.2
      prefix: /usr
  python:
    buildable: false
    version: [3.10.8]
    externals:
    - spec: python@3.10.8
      prefix: /usr/tce/packages/python/python-3.10.8
  readline:
    buildable: false
    externals:
    - spec: readline@7.0
      prefix: /usr
  tar:
    buildable: false
    externals:
    - spec: tar@1.30
      prefix: /usr
  unzip:
    buildable: false
    externals:
    - spec: unzip@6.0
      prefix: /usr
  zlib:
    buildable: false
    externals:
    - spec: zlib@1.2.11
      prefix: /usr

  # External dependencies for SCR
  libyogrt:
    externals:
    - spec: libyogrt@1.24 scheduler=flux
      prefix: /usr
    - spec: libyogrt@1.24 scheduler=slurm
      prefix: /usr
  pdsh:
    buildable: false
    externals:
    - spec: pdsh@2.35
      prefix: /usr
